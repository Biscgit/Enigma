include: "/.ci/ci-templates.yml"

scan-backend:
  extends: .scan_image
  variables:
    DOCKERPATH: "backend"

scan-frontend:
  extends: .scan_image
  variables:
    DOCKERPATH: "frontend"

lint-frontend:
  stage: linter
  image: ${CI_REGISTRY_IMAGE}/flutter-builder:latest
  before_script:
    - cd frontend/
    - flutter pub get
  script:
    - flutter analyze --no-fatal-infos
  allow_failure: true

lint-backend:
  stage: linter
  image: ${CI_REGISTRY_IMAGE}/python-tester-linter:latest
  before_script:
    - cd backend/
  script:
    - python3 -m ruff check
  allow_failure: true
